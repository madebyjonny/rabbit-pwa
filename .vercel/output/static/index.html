<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="description" content="Astro description"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.1.2"><link rel="manifest" href="/manifest.json"><title>Rabbit&quot;</title><style>body{box-sizing:border-box;padding:32px;margin:0;background-color:#ff4d06;height:100vh;font-family:sans-serif}.rabbit{max-width:50%}.wrapper{height:100%;border-radius:16px;background-color:#000;display:flex;gap:48px;flex-direction:column;align-items:center;justify-content:center}.messages{width:70%;margin:0 auto;color:#fefdfe;gap:8px;height:70px;font-size:24px}.loader{display:flex;gap:4px}button[data-loading=true] .loader{display:flex}button[data-loading=true] .btn-content,button[data-loading=false] .loader{display:none}button[data-loading=false] .btn-content{display:flex}.dot{display:flex;height:7px;width:7px;transform:translateY(5px);border-radius:100px;background-color:#fefdfe;animation-delay:1;animation:upDown 1.5s ease-in-out infinite}.dot:nth-child(2){animation-delay:.5s}.dot:nth-child(3){animation-delay:1s}button{display:flex;height:48px;min-width:170px;color:#fff;background-color:transparent;border-radius:16px;border:1px solid #fff;align-items:center;justify-content:center}.sentence{overflow:hidden;min-height:100px}.word{display:inline-block;opacity:0;transform:translateY(20px);animation:appear 1.5s ease-in-out forwards}@keyframes upDown{0%{transform:translateY(5px)}50%{transform:translateY(-5px)}to{transform:translateY(5px)}}@keyframes appear{0%{opacity:0}to{opacity:1}}
</style><script type="module">const e=new webkitSpeechRecognition;e.continuous=!0;e.interimResults=!0;e.lang="en-US";const t=document.querySelector("#ctrl-voice"),a=document.querySelector("#rabbit"),r=document.querySelector("#messages");t.addEventListener("click",()=>{e.start(),a.play(),t.dataset.loading="true"});e.onresult=async function(n){const s=n.results[0][0].transcript;if(n.results[0].isFinal){console.log("You said: "+s),e.stop();const o=await(await fetch("/api/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:s})})).json();var c=new SpeechSynthesisUtterance(o.answer);speechSynthesis.cancel(),window.speechSynthesis.speak(c);const i=o.answer.split(" ");r.innerHTML="",i.forEach((l,u)=>{r.innerHTML+=`<span class="word" style="animation-delay:${u*.2}s;">${l}</span> `}),t.dataset.loading="false",a.pause();return}};e.onerror=function(n){console.log("Error occurred: "+n.error)};e.onend=function(){console.log("<br>Speech recognition ended.")};
</script></head> <body> <main class="wrapper">  <video src="/rabbit.webm" id="rabbit" class="rabbit" loop></video> <section id="messages" class="messages"></section> <button id="ctrl-voice" data-loading="false"> <span class="btn-content">Ask</span> <div class="loader"> <span class="dot"></span> <span class="dot"></span> <span class="dot"></span> </div> </button>  </main> </body></html>  